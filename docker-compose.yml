version: '3'

services:
    client.fllevent.com:
      build: ./client.fllevent.com
      ports:
        - 80:80
    api.fllevent.com:
      build: ./api.fllevent.com
      ports:
        - 4000:8000
    db:
      image: mysql
      environment:
                - MYSQL_DATABASE=${MYSQL_DATABASE}
                - MYSQL_USER=${MYSQL_USER}
                - MYSQL_PASSWORD=${MYSQL_PASSWORD}
                - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
      volumes:
            - ./db:/var/lib/mysql
      ports:
            - "3306:3306"
    phpmyadmin:
      image: phpmyadmin/phpmyadmin
      environment:
            PMA_ARBITRARY: 1
            MYSQL_USER: ${MYSQL_USER}
            MYSQL_PASSWORD: ${MYSQL_PASSWORD}
            MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      ports:
        - "5000:80"
      links:
         # for mysql container
        - "db:db"
volumes:
    db:
      driver: "local"
